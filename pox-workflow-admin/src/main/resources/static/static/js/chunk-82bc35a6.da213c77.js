(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-82bc35a6"],{"333d":function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[i("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},n=[];i("c5f6");Math.easeInOutQuad=function(e,t,i,s){return e/=s/2,e<1?i/2*e*e+t:(e--,-i/2*(e*(e-2)-1)+t)};var r=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function o(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function l(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function a(e,t,i){var s=l(),n=e-s,a=20,c=0;t="undefined"===typeof t?500:t;var u=function e(){c+=a;var l=Math.easeInOutQuad(c,s,n,t);o(l),c<t?r(e):i&&"function"===typeof i&&i()};u()}var c={name:"Pagination",props:{total:{required:!0,type:Number},current:{type:Number,default:1},size:{type:Number,default:10},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.current},set:function(e){this.$emit("update:current",e)}},pageSize:{get:function(){return this.size},set:function(e){this.$emit("update:size",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{current:this.currentPage,size:e}),this.autoScroll&&a(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{current:e,size:this.pageSize}),this.autoScroll&&a(0,800)}}},u=c,d=(i("6467"),i("2877")),f=Object(d["a"])(u,s,n,!1,null,"5599f724",null);t["default"]=f.exports},"3f4b":function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:"发起流程",visible:e.dialogStartProcessVisibleInChild,fullscreen:!1},on:{"update:visible":function(t){e.dialogStartProcessVisibleInChild=t}}},[e.generateStartFormVisible?i("div",[i("fm-generate-form",{ref:"generateStartForm",attrs:{data:e.startFormJson}})],1):e._e(),e._v(" "),i("select-user",{ref:"selectUser",attrs:{visible:e.selectUserVisible,appendToBody:!0,multipleSelect:!0},on:{"update:visible":function(t){e.selectUserVisible=t},selectUserFinished:e.selectUserFinished}}),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-form",{attrs:{"label-width":"100px"}},[e.showBusinessKey?i("el-form-item",{attrs:{label:"业务主键Key:"}},[i("el-input",{attrs:{placeholder:"请输入业务主键Key"},model:{value:e.businessKey,callback:function(t){e.businessKey=t},expression:"businessKey"}})],1):e._e(),e._v(" "),i("el-form-item",{attrs:{label:"抄送给:"}},[i("el-row",{attrs:{align:"left"}},[i("el-col",{attrs:{span:1,align:"left"}},[i("i",{staticClass:"el-icon-plus el-icon--left",staticStyle:{cursor:"pointer"},on:{click:e.doSelectCcTo}})]),e._v(" "),i("el-col",{attrs:{span:23,align:"left"}},e._l(e.ccToVos,(function(t){return i("el-tag",{key:t.userId,staticStyle:{"margin-left":"5px"},attrs:{effect:"plain",closable:""},on:{close:function(i){return e.handleCcToClose(t)}}},[e._v(e._s(t.userName)+"\n                        ")])})),1)],1)],1)],1),e._v(" "),i("el-button",{attrs:{icon:"el-icon-close"},on:{click:function(t){e.dialogStartProcessVisibleInChild=!1}}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{icon:"el-icon-check",type:"primary"},on:{click:e.doStartInstance}},[e._v("确定\n        ")])],1)],1)},n=[],r=i("0fea"),o=i("5c96"),l=i("c4f3"),a={name:"StartProcess",components:{SelectUser:l["default"]},props:{visible:{type:Boolean,default:function(){return!1}},processDefinition:{type:Object,default:function(){return{}}}},computed:{dialogStartProcessVisibleInChild:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}}},data:function(){return{generateStartFormVisible:!1,startFormJson:void 0,variables:void 0,showBusinessKey:!1,businessKey:void 0,selectUserVisible:!1,ccToVos:[]}},created:function(){this.initData()},methods:{initData:function(){var e=this;this.processDefinition.formKey&&Object(r["c"])("/flowable/processDefinition/renderedStartForm",{processDefinitionId:this.processDefinition.id}).then((function(t){var i=t.data;e.showBusinessKey=i.showBusinessKey,i.renderedStartForm&&(e.startFormJson=JSON.parse(i.renderedStartForm),e.generateStartFormVisible=!0)}))},doSelectCcTo:function(){this.selectUserVisible=!0,0==this.$refs.selectUser.treeData.length&&this.$refs.selectUser.getTreeData()},selectUserFinished:function(e){e&&0!=e.length?this.ccToVos=e:o["Message"].error("请先选择用户")},handleCcToClose:function(e){this.ccToVos.splice(this.ccToVos.indexOf(e),1)},doStartInstance:function(){var e=this;this.$refs.generateStartForm?this.$refs.generateStartForm.getData().then((function(t){if(t&&void 0!=t){var i=JSON.stringify(t),s=Object.assign({processInstanceFormData:i},t);return Object(r["d"])("/flowable/processInstance/start",{processDefinitionId:e.processDefinition.id,businessKey:e.businessKey,values:s,ccToVos:e.ccToVos}).then((function(t){var i=t.msg;o["Message"].success(i),e.dialogStartProcessVisibleInChild=!1}))}})).catch((function(e){})):Object(r["d"])("/flowable/processInstance/start",{processDefinitionId:this.processDefinition.id,businessKey:this.businessKey,ccToVos:this.ccToVos}).then((function(t){var i=t.msg;o["Message"].success(i),e.dialogStartProcessVisibleInChild=!1}))}}},c=a,u=i("2877"),d=Object(u["a"])(c,s,n,!1,null,null,null);t["default"]=d.exports},6467:function(e,t,i){"use strict";var s=i("c45a"),n=i.n(s);n.a},7529:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"filter-container"},[i("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"流程定义名称"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.btnQuery(t)}},model:{value:e.listQuery.processDefinitionName,callback:function(t){e.$set(e.listQuery,"processDefinitionName",t)},expression:"listQuery.processDefinitionName"}}),e._v(" "),i("el-dropdown",{staticClass:"filter-item",attrs:{"split-button":"",type:"primary"},on:{click:e.btnQuery}},[i("i",{staticClass:"el-icon-search el-icon--left"}),e._v("查询\n            "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{attrs:{icon:"el-icon-zoom-out"},nativeOn:{click:function(t){return e.btnReset(t)}}},[e._v("重置")])],1)],1)],1),e._v(" "),i("el-row",e._l(e.records,(function(t){return i("el-col",{attrs:{span:12}},[i("div",{staticClass:"filter-container",staticStyle:{"margin-right":"3px","margin-bottom":"3px"}},[i("el-card",[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",[e._v(e._s(t.name)+"-v"+e._s(t.version))]),e._v(" "),i("div",{staticStyle:{position:"relative","text-align":"right"}},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){return e.btnImage(t.id)}}},[e._v("流程图")]),e._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){return e.btnStartInstance(t)}}},[e._v("发起流程\n                            ")])],1)]),e._v(" "),i("div",{staticClass:"text item"},[e._v("\n                        "+e._s(t.description?t.description:"无描述")+"\n                    ")]),e._v(" "),i("div",{staticClass:"text item"},[e._v("\n                        "+e._s(t.category?t.category:"无命名空间")+"\n                    ")])])],1)])})),1),e._v(" "),i("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,current:e.listQuery.current,size:e.listQuery.size},on:{"update:current":function(t){return e.$set(e.listQuery,"current",t)},"update:size":function(t){return e.$set(e.listQuery,"size",t)},pagination:e.list}}),e._v(" "),i("el-dialog",{attrs:{title:"流程图",fullscreen:"",visible:e.dialogImageVisible,width:"80%"},on:{"update:visible":function(t){e.dialogImageVisible=t}}},[i("img",{attrs:{src:e.imagePath,alt:"流程图"}})]),e._v(" "),e.dialogStartInstanceVisible?i("start-process",{attrs:{visible:e.dialogStartInstanceVisible,processDefinition:e.processDefinition},on:{"update:visible":function(t){e.dialogStartInstanceVisible=t}}}):e._e()],1)},n=[],r=i("333d"),o=i("0fea"),l=i("5c96"),a=i("5f87"),c=i("3f4b"),u={name:"FlowableStartMyProcess",components:{StartProcess:c["default"],Pagination:r["default"]},data:function(){return{dicts:[],records:null,selectedRecords:[],total:0,listQuery:{current:1,size:10,processDefinitionId:void 0,processDefinitionName:void 0,processDefinitionKey:void 0,latestVersion:!0,suspended:void 0},dialogFormVisible:!1,dialogImportVisible:!1,dialogImageVisible:!1,imagePath:"",dialogStartInstanceVisible:!1,formJson:void 0,dialogProcessDefinitionIdentityLinkVisible:!1,selectedProcessDefinitionId:"",selectedProcessDefinitionName:"",processDefinition:void 0}},created:function(){this.list()},methods:{list:function(){var e=this;Object(o["c"])("/flowable/processDefinition/listMyself",this.listQuery).then((function(t){var i=t.data;e.records=i.records,e.total=i.total,0==i.total&&l["Message"].info("查无可发起的流程")}))},btnQuery:function(){this.listQuery.current=1,this.list()},btnReset:function(){this.listQuery={current:1,size:10,processDefinitionId:void 0,processDefinitionName:void 0,processDefinitionKey:void 0,latestVersion:!0,suspended:void 0},this.list()},btnImage:function(e){this.imagePath="".concat("/pox")+"/flowable/processDefinition/image?processDefinitionId="+e+"&access_token="+Object(a["a"])()+"&time="+new Date,this.dialogImageVisible=!0},btnStartInstance:function(e){this.processDefinition=e,this.dialogStartInstanceVisible=!0}}},d=u,f=i("2877"),p=Object(f["a"])(d,s,n,!1,null,null,null);t["default"]=p.exports},c45a:function(e,t,i){},c4f3:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:"选择用户",visible:e.visibleInChild,"append-to-body":e.appendToBody,fullscreen:"","before-close":e.close},on:{"update:visible":function(t){e.visibleInChild=t}}},[i("div",{staticClass:"el-dialog-body-custom-height"},[i("el-row",{attrs:{gutter:5}},[i("el-col",{attrs:{span:6}},[i("div",[i("el-input",{staticStyle:{"margin-bottom":"10px"},attrs:{placeholder:"请输入过滤条件"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),i("el-tree",{ref:"_selectOrgTree",staticClass:"filter-tree",attrs:{data:e.treeData,"node-key":"id",props:e.defaultProps,"filter-node-method":e.filterNode},on:{"node-click":e.handleNodeClick}})],1)]),e._v(" "),i("el-col",{attrs:{span:12}},[i("div",[i("div",{staticClass:"filter-container"},[i("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"用户ID"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.btnQuery(t)}},model:{value:e.listQuery.userId,callback:function(t){e.$set(e.listQuery,"userId",t)},expression:"listQuery.userId"}}),e._v(" "),i("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"用户姓名"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.btnQuery(t)}},model:{value:e.listQuery.userName,callback:function(t){e.$set(e.listQuery,"userName",t)},expression:"listQuery.userName"}}),e._v(" "),i("el-dropdown",{staticClass:"filter-item",attrs:{"split-button":"",type:"primary"},on:{click:e.btnQuery}},[i("i",{staticClass:"el-icon-search el-icon--left"}),e._v("查询\n                            "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{attrs:{icon:"el-icon-zoom-out"},nativeOn:{click:function(t){return e.btnReset(t)}}},[e._v("重置\n                                ")])],1)],1)],1),e._v(" "),i("el-table",{ref:"_sysUserTable",staticStyle:{width:"100%"},attrs:{data:e.records,border:"",fit:"","highlight-current-row":"",height:"337","cell-style":{padding:"3px"}},on:{"row-click":e.rowClick}},[i("el-table-column",{attrs:{label:"用户ID",prop:"userId",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.userId))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"用户姓名",prop:"userName",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.userName))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"所属机构ID",prop:"orgId",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.orgId))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"所属机构",prop:"orgName",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.orgName))])]}}])})],1),e._v(" "),i("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,current:e.listQuery.current,size:e.listQuery.size},on:{"update:current":function(t){return e.$set(e.listQuery,"current",t)},"update:size":function(t){return e.$set(e.listQuery,"size",t)},pagination:e.listSysUsers}})],1)]),e._v(" "),i("el-col",{attrs:{span:6}},[i("div",[i("div",{staticStyle:{"margin-bottom":"10px"}},[i("el-button",{attrs:{icon:"el-icon-remove",type:"primary"},on:{click:e.btnRemoveAll}},[e._v("清空")])],1),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.selectedRecords,border:"",fit:"","highlight-current-row":"",height:"337","cell-style":{padding:"3px"}}},[i("el-table-column",{attrs:{label:"用户ID",prop:"userId",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.userId))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"用户姓名",prop:"userName",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.userName))])]}}])}),e._v(" "),e.multipleSelect?i("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[i("i",{staticClass:"el-icon-delete el-icon--left",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.btnRemove(s)}}})]}}],null,!1,2173128288)}):e._e()],1)],1)])],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{icon:"el-icon-close"},on:{click:function(t){e.visibleInChild=!1}}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{icon:"el-icon-check",type:"primary"},on:{click:e.confirm}},[e._v("确定")])],1)])},n=[],r=(i("20d6"),i("333d")),o=i("0fea"),l=i("5c96"),a={name:"SelectUser",components:{Pagination:r["default"]},props:{visible:{type:Boolean,default:!1},multipleSelect:{type:Boolean,default:!1},type:{type:String,default:""},appendToBody:{type:Boolean,default:!1}},data:function(){return{filterText:"",treeData:[],defaultProps:{children:"children",label:"label",isLeaf:"isLeaf",data:"data"},records:[],total:0,selectedRecords:[],listQuery:{current:1,size:10,userId:void 0,userName:void 0,orgId:void 0},currOrgId:""}},watch:{filterText:function(e){this.$refs._selectOrgTree.filter(e)}},computed:{visibleInChild:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}}},methods:{close:function(){this.visibleInChild=!1},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},getTreeData:function(){var e=this;Object(o["c"])("/sys/org/getSelectTreeData",{type:this.type}).then((function(t){var i=t.data;e.treeData=i}))},handleNodeClick:function(e){this.currOrgId=e.id,this.listSysUsers()},listSysUsers:function(){var e=this;this.listQuery.orgId=this.currOrgId,Object(o["c"])("/sys/user/listSelectUser",this.listQuery).then((function(t){var i=t.data;e.records=i.records,e.total=i.total}))},btnQuery:function(){this.listQuery.current=1,this.listSysUsers()},btnReset:function(){this.currOrgId="",this.listQuery={current:1,size:10,userId:void 0,userName:void 0,orgId:void 0},this.listSysUsers()},rowClick:function(e){if(this.multipleSelect){var t=this.selectedRecords,i=t.findIndex((function(t){return t.userId===e.userId}));i<0?t.push(e):t.splice(i,1)}else this.selectedRecords=[],this.selectedRecords[0]=e},btnRemoveAll:function(){this.selectedRecords=[]},btnRemove:function(e){var t=this.selectedRecords;t.splice(t.findIndex((function(t){return t.userId===e.userId})),1)},confirm:function(){this.selectedRecords&&0!=this.selectedRecords.length?(this.multipleSelect?this.$emit("selectUserFinished",this.selectedRecords):this.$emit("selectUserFinished",this.selectedRecords[0]),this.selectedRecords=[],this.records=[],this.visibleInChild=!1):l["Message"].error("请先选择用户")}}},c=a,u=i("2877"),d=Object(u["a"])(c,s,n,!1,null,null,null);t["default"]=d.exports}}]);